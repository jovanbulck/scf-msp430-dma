Error dumps to look into:

General notes and pointers:

* See the openMSP430 table with documented deviations instruction cycles [here](https://github.com/sancus-tee/sancus-core/blob/master/doc/openMSP430.pdf)
* Wikipedia has a nice [overview](https://en.wikipedia.org/wiki/TI_MSP430#MSP430_CPU) of MSP430 instructions and addressing modes
* LLVM tablegen files for MSP430 are [here](https://github.com/llvm-mirror/llvm/blob/master/lib/Target/MSP430/MSP430InstrInfo.td)

### General: Illegal instructions generated by the Nemesis compiler?

```
$ msp430-objdump -d testcase/diamond.nemdef | grep -C 2 -i "illegal"
000082ae <.LBB0_1>:
    82ae:	3f 40 07 00 	mov	#7,	r15	;#0x0007
    82b2:	33 40       	.word	0x4033;	????	Illegal as 2-op instr
    82b4:	2a 00       	.word	0x002a;	????	
    82b6:	33 40       	.word	0x4033;	????	Illegal as 2-op instr
    82b8:	2a 00       	.word	0x002a;	????	

--
000082c2 <.LBB0_3>:
    82c2:	0c 4f       	mov	r15,	r12	
    82c4:	33 40       	.word	0x4033;	????	Illegal as 2-op instr
    82c6:	2a 00       	.word	0x002a;	????	
    82c8:	33 40       	.word	0x4033;	????	Illegal as 2-op instr
    82ca:	2a 00       	.word	0x002a;	????	

--

000082d8 <.LBB0_7>:
    82d8:	33 40       	.word	0x4033;	????	Illegal as 2-op instr
    82da:	2a 00       	.word	0x002a;	????	
    82dc:	33 40       	.word	0x4033;	????	Illegal as 2-op instr
    82de:	2a 00       	.word	0x002a;	????	
    82e0:	33 40       	.word	0x4033;	????	Illegal as 2-op instr
    82e2:	2a 00       	.word	0x002a;	????	
    82e4:	ea 3f       	jmp	$-42     	;abs 0x82ba

000082e6 <.LBB0_8>:
    82e6:	33 40       	.word	0x4033;	????	Illegal as 2-op instr
    82e8:	2a 00       	.word	0x002a;	????	
    82ea:	03 43       	nop			
    82ec:	33 40       	.word	0x4033;	????	Illegal as 2-op instr
    82ee:	2a 00       	.word	0x002a;	????	
    82f0:	ed 3f       	jmp	$-36     	;abs 0x82cc

```

### Incorrect trace: call immediate DMA trace 4 cycles vs. expected 5 cycles

```
$ ./main.py testcase/multiply.json 
SUB16rc      sub   with len=1; trace=1|0|0                      ('r2', 'r1')         (@0x5e3a in testcase/multiply)
KeyError: Unknown MSP430TableGen instruction: MOV16nr
MOV16nr      mov   with len=4; trace=None                       ('r12', 'r1')        (@0x5e3c in testcase/multiply)
KeyError: Unknown MSP430TableGen instruction: MOV16nr
MOV16nr      mov   with len=4; trace=None                       ('r13', 'r1')        (@0x5e40 in testcase/multiply)
MOV16rn      mov   with len=3; trace=101|010|000                ('r1', 'r12')        (@0x5e44 in testcase/multiply)
POP16r       mov   with len=2; trace=01|10|00                   ('r1', 'r13')        (@0x5e48 in testcase/multiply)
CALLi        call  with len=5; trace=1000|0001|0000             ('#6046',)           (@0x5e4a in testcase/multiply)
Traceback (most recent call last):
  File "./main.py", line 45, in <module>
    sys.exit(main())
  File "./main.py", line 19, in main
    program = SyntaxConverter.parse_file(initializer.get_file_path(), initializer.get_starting_function())
  File "/home/jo/Documents/SCF-MSP430/scfmsp/dataextraction/SyntaxConverter.py", line 15, in parse_file
    return SyntaxConverter.parse_elf(file, elf, starting_function, starting_function_address, starting_function_size, section_name, ret, caller= None, call_dic={})
  File "/home/jo/Documents/SCF-MSP430/scfmsp/dataextraction/SyntaxConverter.py", line 45, in parse_elf
    instr.set_info(instr_string, length, address, arguments, clock, op_list[0][i:], register, index, immediate, indirect, dst_register, dst_index, file, as_mode, ad_mode)
  File "/home/jo/Documents/SCF-MSP430/scfmsp/controlflowanalysis/AbstractInstruction.py", line 402, in set_info
    assert(self.latency*3 + 2 == len(self.trace))
AssertionError
```

### Missing traces

For some reason these instructions seem not to be in the tablegen_raw file, but
they are used so we need to have a DMA trace for them:

General:

* Missing addressing modes for "symbolic" and "indirect" (w/o autoincrement)? AFAIS they're also not in the [TableGen spec](https://github.com/llvm-mirror/llvm/blob/master/lib/Target/MSP430/MSP430InstrFormats.td#L17)
* We have `rn` but not `nr` so the generation script misses this? eg `mov     r12,    4(r10)`

Missing instructions reported below:

```
KeyError: Unknown MSP430TableGen instruction: MOV16nr
KeyError: Unknown MSP430TableGen instruction: MOV16nc
KeyError: Unknown MSP430TableGen instruction: BIT8nc
KeyError: Unknown MSP430TableGen instruction: AND16ni
KeyError: Unknown MSP430TableGen instruction: MOV16nn
KeyError: Unknown MSP430TableGen instruction: BIS16nc
KeyError: Unknown MSP430TableGen instruction: CMP16nc

```

